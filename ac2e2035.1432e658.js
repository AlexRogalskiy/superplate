(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{123:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return s})),a.d(t,"metadata",(function(){return l})),a.d(t,"toc",(function(){return u})),a.d(t,"default",(function(){return b}));var n=a(3),r=a(7),o=(a(0),a(157)),i=a(161),c=a(162),s={id:"redux-toolkit",title:"Redux Toolkit",sidebar_label:"Redux Toolkit",description:"How to Use Redux Toolkit in React?"},l={unversionedId:"react/state-management/redux-toolkit",id:"react/state-management/redux-toolkit",isDocsHomePage:!1,title:"Redux Toolkit",description:"How to Use Redux Toolkit in React?",source:"@site/docs/react/state-management/redux-toolkit.md",slug:"/react/state-management/redux-toolkit",permalink:"/superplate/docs/react/state-management/redux-toolkit",editUrl:"https://github.com/pankod/superplate/tree/master/documentation/docs/react/state-management/redux-toolkit.md",version:"current",lastUpdatedBy:"Muharrem Kocadere",lastUpdatedAt:1626424760,sidebar_label:"Redux Toolkit",sidebar:"someSidebar",previous:{title:"React Use",permalink:"/superplate/docs/react/hooks/react-use"},next:{title:"Recoil.js",permalink:"/superplate/docs/react/state-management/recoil"}},u=[{value:"Configure Store &amp; Setup Reducers and Slices",id:"configure-store--setup-reducers-and-slices",children:[]},{value:"Hooks (useSelector &amp; useDispatch)",id:"hooks-useselector--usedispatch",children:[]},{value:"Middleware",id:"middleware",children:[]},{value:"RTK Query",id:"rtk-query",children:[]},{value:"Adding Redux Toolkit to your project later",id:"adding-redux-toolkit-to-your-project-later",children:[]}],d={toc:u};function b(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},d,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Redux is a predictable state container for JavaScript apps. Redux Toolkit is the official, opinionated, batteries-included toolset for efficient Redux development."),Object(o.b)("p",null,"It helps you write applications that behave consistently, run in different environments (client, server, and native), and are easy to test. On top of that, it provides a great developer experience, such as live code editing combined with a time traveling debugger.",Object(o.b)("br",{parentName:"p"}),"\n",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://redux.js.org/introduction/getting-started"}),"Refer to official Redux documentation for detailed usage. ","\u2192"),Object(o.b)("br",{parentName:"p"}),"\n",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://redux-toolkit.js.org/introduction/quick-start"}),"Refer to official Redux Toolkit documentation for detailed usage. ","\u2192")),Object(o.b)("p",null,"superplate serves an optional ",Object(o.b)("inlineCode",{parentName:"p"},"redux")," plugin that uses ",Object(o.b)("inlineCode",{parentName:"p"},"@reduxjs/toolkit")),Object(o.b)("h3",{id:"configure-store--setup-reducers-and-slices"},"Configure Store & Setup Reducers and Slices"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Create a store with a root reducer")),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://redux-toolkit.js.org/api/configureStore"}),"Refer to official documentation on configuring store for detailed usage. ","\u2192")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/redux/store.ts"',title:'"src/redux/store.ts"'}),'import { configureStore } from "@reduxjs/toolkit";\n\nimport rootReducer from "./reducers";\n\nexport default configureStore({ reducer: rootReducer });\n')),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Add a root reducer that combines reducers.")),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://redux.js.org/recipes/structuring-reducers/using-combinereducers"}),"Refer to official documentation on combineReducers for detailed usage. ","\u2192")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/redux/reducers.ts"',title:'"src/redux/reducers.ts"'}),'import { combineReducers } from "redux";\n\nimport counter from "@redux/slices/counter";\n\nexport default combineReducers({ counter });\n')),Object(o.b)("br",null),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"createSlice"),' accepts an initial state, an object full of reducer functions, and a "slice name", and automatically generates action creators and action types that correspond to the reducers and state.  '),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Add counter slice. ",Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/erikras/ducks-modular-redux"}),"Export ",Object(o.b)("inlineCode",{parentName:"a"},"reducer")," as default and actions as named exports."))),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/redux/slices/counter/index.ts"',title:'"src/redux/slices/counter/index.ts"'}),'import { createSlice } from "@reduxjs/toolkit";\n\nconst initialState = {\n    count: 20,\n};\n\nconst counterSlice = createSlice({\n    name: "counter",\n    initialState,\n    reducers: {\n        increase: (state) => {\n            state.count++;\n        },\n        decrease: (state) => {\n            state.count--;\n        },\n    },\n});\n\nexport const { increase, decrease } = counterSlice.actions;\n\nexport default counterSlice.reducer;\n')),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"Since Redux Toolkit uses Immer under the hood, you can use mutating immutable updates."),Object(o.b)("pre",{parentName:"div"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts"}),"increase(state) {\n  // highlight-start\n    state.value++\n  // highlight-end\n},\n")))),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Pass ",Object(o.b)("inlineCode",{parentName:"li"},"store")," to ",Object(o.b)("inlineCode",{parentName:"li"},"Provider")," from React-Redux in ",Object(o.b)("inlineCode",{parentName:"li"},"App.tsx"))),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-tsx",metastring:'title="src/App.tsx"',title:'"src/App.tsx"'}),'import { Provider } from "react-redux";\nimport store from "@redux/store";\n\nimport Home from "pages";\n\nfunction App(): JSX.Element {\n  return (\n    <Provider store={store}>\n        <div className="App">\n          <Home />\n        </div>\n      </Provider>\n  );\n}\n\nexport default App;\n')),Object(o.b)("p",null,"Now everything's ready to read data from store and dispatch some actions to make changes to store state."),Object(o.b)("div",{className:"admonition admonition-tip alert alert--success"},Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(o.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"})))),"tip")),Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"All this work will be handled automatically by CLI, so you don\u2019t need to do anything extra as long as you choose ",Object(o.b)("strong",{parentName:"p"},"Redux Toolkit")," plugin during the project creation phase."))),Object(o.b)("h3",{id:"hooks-useselector--usedispatch"},"Hooks (useSelector & useDispatch)"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"useSelector")," from React-Redux is used to read data from store. It accepts a single selector function. A selector is a function that takes the entire Redux store state as its argument, reads some value from the state, and returns that result."),Object(o.b)("p",null,"The React-Redux also provides a ",Object(o.b)("inlineCode",{parentName:"p"},"useDispatch")," hook that gives us the store's dispatch method as its result. This method is used to dispatch actions to make changes to the store state."),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-tsx",metastring:'title="src/components/counter/index.tsx"',title:'"src/components/counter/index.tsx"'}),'import React from "react";\n// highlight-start\nimport { useDispatch, useSelector } from "react-redux";\n// highlight-end\n\nimport { increase, decrease } from "@redux/actions";\nimport { IState } from "@redux/istate";\n\nexport default function Counter() {\n  // highlight-start\n  const dispatch = useDispatch();\n  const count = useSelector((state: IState) => state.counter.count);\n  // highlight-end\n  \n  return (\n    <div>\n      <div>\n        <h2>Counter</h2>\n        <button\n          type="button"\n          // highlight-start\n          onClick={() => dispatch(increase())}\n          // highlight-end\n        >\n          +\n        </button>\n        <span>{count}</span>\n        <button\n          type="button"\n          // highlight-start\n          onClick={() => dispatch(decrease())}\n          // highlight-end\n        >\n          -\n        </button>\n      </div>\n    </div>\n  );\n}\n')),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://redux.js.org/tutorials/fundamentals/part-5-ui-react#reading-state-from-the-store-with-useselector"}),"Refer to official documentation on Hooks usage for detailed usage. ","\u2192")),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"increase")," and ",Object(o.b)("inlineCode",{parentName:"p"},"decrease")," are action creator methods that return actual action objects for dispatch. They are generated by ",Object(o.b)("inlineCode",{parentName:"p"},"createSlice")," and can be accessed from the slice. ",Object(o.b)("inlineCode",{parentName:"p"},"createSlice")," uses ",Object(o.b)("inlineCode",{parentName:"p"},"createAction")," under the hood to produce action creators.",Object(o.b)("br",{parentName:"p"}),"\n",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://redux-toolkit.js.org/api/createAction"}),"Refer to official documentation on createAction usage for detailed usage. ","\u2192")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/redux/slices/counter/index.ts"',title:'"src/redux/slices/counter/index.ts"'}),"...\n\nexport const { increase, decrease } = counterSlice.actions;\n")),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-ts",metastring:'title="src/redux/actions.ts"',title:'"src/redux/actions.ts"'}),'export { increase, decrease } from "@redux/slices/counter";\n')),Object(o.b)("h3",{id:"middleware"},"Middleware"),Object(o.b)("p",null,"Redux middleware provides a third-party extension point between dispatching an action, and the moment it reaches the reducer. Redux middleware can be used for logging, crash reporting, talking to an asynchronous API, routing, and more."),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"Redux Toolkit includes ",Object(o.b)("inlineCode",{parentName:"p"},"thunk")," middleware by default.",Object(o.b)("br",{parentName:"p"}),"\n",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://redux-toolkit.js.org/api/getDefaultMiddleware#included-default-middleware"}),"Refer to official documentation on included default middleware for detailed usage. ","\u2192")))),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://redux.js.org/tutorials/fundamentals/part-4-store#middleware"}),"Refer to official documentation on Redux Middleware for detailed usage. ","\u2192"),Object(o.b)("br",{parentName:"p"}),"\n",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://redux-toolkit.js.org/api/getDefaultMiddleware"}),"Refer to official documentation on Redux Toolkit Middleware for detailed usage. ","\u2192")),Object(o.b)("h3",{id:"rtk-query"},"RTK Query"),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://redux-toolkit.js.org/rtk-query/overview"}),"Refer to official documentation on RTK Query for detailed usage. ","\u2192")),Object(o.b)("h3",{id:"adding-redux-toolkit-to-your-project-later"},"Adding Redux Toolkit to your project later"),Object(o.b)("p",null,"If you didn't choose the plugin during project creation phase, you can follow the instructions below to add it."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Install ",Object(o.b)("inlineCode",{parentName:"li"},"@reduxjs/toolkit")," and ",Object(o.b)("inlineCode",{parentName:"li"},"react-redux")," packages")),Object(o.b)(i.a,{defaultValue:"npm",values:[{label:"npm",value:"npm"},{label:"yarn",value:"yarn"}],mdxType:"Tabs"},Object(o.b)(c.a,{value:"npm",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"npm install @reduxjs/toolkit react-redux\n"))),Object(o.b)(c.a,{value:"yarn",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-bash"}),"yarn add @reduxjs/toolkit react-redux\n")))),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#configure-store--setup-reducers-and-slices"}),"Follow instructions in Configure Store & Setup Reducers and Slices"))),Object(o.b)("p",null,Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://redux-toolkit.js.org/introduction/quick-start#installation"}),"Refer to official documentation on installation for detailed usage. ","\u2192")))}b.isMDXComponent=!0},157:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return m}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=r.a.createContext({}),u=function(e){var t=r.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},d=function(e){var t=u(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},p=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),d=u(a),p=n,m=d["".concat(i,".").concat(p)]||d[p]||b[p]||o;return a?r.a.createElement(m,c(c({ref:t},l),{},{components:a})):r.a.createElement(m,c({ref:t},l))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=p;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:n,i[1]=c;for(var l=2;l<o;l++)i[l]=a[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}p.displayName="MDXCreateElement"},158:function(e,t,a){"use strict";function n(e){var t,a,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(a=n(e[t]))&&(r&&(r+=" "),r+=a);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}t.a=function(){for(var e,t,a=0,r="";a<arguments.length;)(e=arguments[a++])&&(t=n(e))&&(r&&(r+=" "),r+=t);return r}},159:function(e,t,a){"use strict";var n=a(0),r=a(160);t.a=function(){var e=Object(n.useContext)(r.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},160:function(e,t,a){"use strict";var n=a(0),r=Object(n.createContext)(void 0);t.a=r},161:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(159),i=a(158),c=a(55),s=a.n(c),l=37,u=39;t.a=function(e){var t=e.lazy,a=e.block,c=e.defaultValue,d=e.values,b=e.groupId,p=e.className,m=Object(o.a)(),f=m.tabGroupChoices,j=m.setTabGroupChoices,h=Object(n.useState)(c),O=h[0],g=h[1],v=n.Children.toArray(e.children);if(null!=b){var x=f[b];null!=x&&x!==O&&d.some((function(e){return e.value===x}))&&g(x)}var N=function(e){g(e),null!=b&&j(b,e)},y=[];return r.a.createElement("div",null,r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(i.a)("tabs",{"tabs--block":a},p)},d.map((function(e){var t=e.value,a=e.label;return r.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":O===t,className:Object(i.a)("tabs__item",s.a.tabItem,{"tabs__item--active":O===t}),key:t,ref:function(e){return y.push(e)},onKeyDown:function(e){!function(e,t,a){switch(a.keyCode){case u:!function(e,t){var a=e.indexOf(t)+1;e[a]?e[a].focus():e[0].focus()}(e,t);break;case l:!function(e,t){var a=e.indexOf(t)-1;e[a]?e[a].focus():e[e.length-1].focus()}(e,t)}}(y,e.target,e)},onFocus:function(){return N(t)},onClick:function(){N(t)}},a)}))),t?Object(n.cloneElement)(v.filter((function(e){return e.props.value===O}))[0],{className:"margin-vert--md"}):r.a.createElement("div",{className:"margin-vert--md"},v.map((function(e,t){return Object(n.cloneElement)(e,{key:t,hidden:e.props.value!==O})}))))}},162:function(e,t,a){"use strict";var n=a(3),r=a(0),o=a.n(r);t.a=function(e){var t=e.children,a=e.hidden,r=e.className;return o.a.createElement("div",Object(n.a)({role:"tabpanel"},{hidden:a,className:r}),t)}}}]);